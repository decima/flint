<!DOCTYPE html>
<html>
<head>
    <title>Go Web SSH</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.min.css" />
    <style>
        /* Style pour que le terminal remplisse la page */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            background-color: #000; /* Fond noir */
        }
        #terminal {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
<div id="terminal"></div>

<script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.min.js"></script>

<script>
    const term = new Terminal({
        cursorBlink: true,
        theme: {
            background: '#000000',
            foreground: '#ffffff',
            cursor: '#ffffff',
        }
    });
    term.open(document.getElementById('terminal'));
    term.focus();

    const socket = new WebSocket('ws://localhost:8080/ws');


    // Événement: La connexion WebSocket est ouverte
    socket.onopen = (event) => {
        //socket.send("docker exec -it fakeubuntu bash\n");
        term.write('\x1b[32m--- Connection established ---\r\n\x1b[0m');
    };

    socket.onmessage = (event) => {
        term.write(event.data);
    };
    term.onData(data => {
        socket.send(data);
    });

    socket.onclose = (event) => {
        term.write('\x1b[31m--- Connection closed ---\r\n\x1b[0m');
    };

    socket.onerror = (error) => {
        term.write(`\x1b[31m[WebSocket Error] ${error.message}\r\n\x1b[0m`);
    };

</script>
</body>
</html>